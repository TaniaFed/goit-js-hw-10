{"version":3,"file":"1-timer-BtLgQl8c.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputEl = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button');\nconst timerFields = document.querySelectorAll('.timer [data-days], .timer [data-hours], .timer [data-minutes], .timer [data-seconds]');\n\nlet userSelectedDate = null;\nlet intervalId = null;\nlet timerActive = false; \n\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n      \n    if (selectedDates[0] < new Date()) {\n        iziToast.error({\n            title: 'Error!',\n            message: 'Please, choose a date in the future!'\n        });\n        startBtn.disabled = true;\n    } else {\n        userSelectedDate = selectedDates[0];\n        startBtn.disabled = false;\n    };\n  },\n};\n\nflatpickr(inputEl, options);\n\nstartBtn.addEventListener('click', () => {\n    \n    if (timerActive) {  \n        return;\n    }\n\n    startBtn.disabled = true;\n    inputEl.disabled = true;\n\n    \n    intervalId = setInterval(() => {\n        const diff = userSelectedDate - new Date();\n        console.log(convertMs(diff)); \n        \n        if (diff <= 0) {\n            clearInterval(intervalId);\n            startBtn.disabled = false;\n            inputEl.disabled = false;\n            iziToast.success({\n                title: 'Countdown Done!',\n                message: 'Please, reload page and choose another date!'\n            }); \n            timerActive = false;\n        } else {\n            const { days, hours, minutes, seconds } = convertMs(diff);\n            timerFields[0].textContent = addLeadingZero(days);\n            timerFields[1].textContent = addLeadingZero(hours);\n            timerFields[2].textContent = addLeadingZero(minutes);\n            timerFields[3].textContent = addLeadingZero(seconds);\n        }\n    }, 1000);\n    \n    timerActive = true;\n\n});\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}"],"names":["inputEl","startBtn","timerFields","userSelectedDate","intervalId","timerActive","options","selectedDates","iziToast","flatpickr","diff","convertMs","days","hours","minutes","seconds","addLeadingZero","value","ms"],"mappings":"svBAMA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,QAAQ,EAC1CC,EAAc,SAAS,iBAAiB,uFAAuF,EAErI,IAAIC,EAAmB,KACnBC,EAAa,KACbC,EAAc,GAElBJ,EAAS,SAAW,GAEpB,MAAMK,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAExBA,EAAc,CAAC,EAAI,IAAI,MACvBC,EAAS,MAAM,CACX,MAAO,SACP,QAAS,sCACrB,CAAS,EACDP,EAAS,SAAW,KAEpBE,EAAmBI,EAAc,CAAC,EAClCN,EAAS,SAAW,GAEzB,CACH,EAEAQ,EAAUT,EAASM,CAAO,EAE1BL,EAAS,iBAAiB,QAAS,IAAM,CAEjCI,IAIJJ,EAAS,SAAW,GACpBD,EAAQ,SAAW,GAGnBI,EAAa,YAAY,IAAM,CAC3B,MAAMM,EAAOP,EAAmB,IAAI,KAGpC,GAFA,QAAQ,IAAIQ,EAAUD,CAAI,CAAC,EAEvBA,GAAQ,EACR,cAAcN,CAAU,EACxBH,EAAS,SAAW,GACpBD,EAAQ,SAAW,GACnBQ,EAAS,QAAQ,CACb,MAAO,kBACP,QAAS,8CACzB,CAAa,EACDH,EAAc,OACX,CACH,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYJ,EAAUD,CAAI,EACxDR,EAAY,CAAC,EAAE,YAAcc,EAAeJ,CAAI,EAChDV,EAAY,CAAC,EAAE,YAAcc,EAAeH,CAAK,EACjDX,EAAY,CAAC,EAAE,YAAcc,EAAeF,CAAO,EACnDZ,EAAY,CAAC,EAAE,YAAcc,EAAeD,CAAO,CACtD,CACJ,EAAE,GAAI,EAEPV,EAAc,GAElB,CAAC,EAED,SAASW,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASN,EAAUO,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIJ,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}